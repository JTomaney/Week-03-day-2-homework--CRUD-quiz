# CRUD Quiz

Use the solution to this afternoon's Property Tracker lab to answer the following questions. Please write your answers under each question, push the file to GitHub, and submit in the usual way.

## MVP Questions

In our Property Tracker application:

Q1. Where are we instantiating instances of the `Property` class?

property.rb

Q2. Where are we defining the SQL that enables us to save the ruby `Property` object into the database?

properties.sql

Q3. In console.rb, which lines modify the database?

4 Property.delete_all(),
13 property1.save(),
22 property2.save(),
31 property3.save(),
33 property1.delete()

Q4. Why do we not define the id of a `Property` object at the point we instantiate it (‘new it up’)?

Because we want the the database to assign the id, this ensures the id is unique within the database.

Q5. Where and how do we assign the id (that is generated by the database) to the ruby `Property` object?

The id is assigned to the object when the object is saved to the database using the 'save()' method. The final part of the sql query (line 29) has the database return the id of the newly saved entry to the model, which is then assigned to the property @id on line 32 when the sql query is executed.

Q6. Why do we put a guard (an `if` clause) on the `@id` attribute in the constructor?

Because when a new object is first constructed it won't have an id (the database will assign one when the object is saved).  without the 'if' the constructor would always be expecting an id argument and would throw the 'wrong number of arguments' error.

Q7. Why are some of the CRUD actions represented by instance methods, and others by class methods?

When a CRUD action only affects/requires one object (e.g. delete) an instance method is used as an object can be responsible for itself. When the action affects/requires multiple/all objects of a class (e.g. find) a class method is used as individual instances shouldn't have responsibility for others.

Q8. What type of data structure is returned by calls to `db.exec_prepared()`? In the `save` method, how do we access the id from the returned data structure?

calls to `db.exec_prepared()` always return an array of a hash or multiple hashes. To access the id of an entry in this array we use .map to transform the array onto an array of objects which are constructed using the hashes as the argument.

Q9. Why do we use prepared statements when performing database operations?

Prepared statements are used for security. Preparing the statement 'sanitises' it, ensuring additional sql queries cannot be added onto the end.

## Extension Questions

Look at the `find_by_id` and `find_by_address` methods in the `Property` class.

Q10. What do they take in as their arguments?

find_by_id takes in the id property of an object which is an integer.
find_by_address takes in a string containing the address to be searched for.

Q11. What are their return values?

Bothe methods return a new object of the class Property
